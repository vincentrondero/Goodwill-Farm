    {% extends 'base.html' %}
    {% load static %}
    {% block content %}
    <div>Reports</div>

    <div id="months" style="display: none;">{{ months|safe }}</div>
    <div id="counts" style="display: none;">{{ counts|safe|default:"[]" }}</div>
    <div id="totalPigs" style="display: none;">{{ total_pigs }}</div>
    <div id="vaccinatedPigs" style="display: none;">{{ vaccinated_pigs }}</div>
    <div id="salesData" style="display: none;">{{ sale_counts|safe }}</div>
    <div id="saleMonths" style="display: none;">{{ sale_months|safe }}</div>
    <div id="mortalityData" style="display: none;">{{ mortality_counts|safe }}</div>
    <div id="mortalityDates" style="display: none;">{{ mortality_dates|safe }}</div>
    <div id="totalWeanlings" style="display: none;">{{ weanlings_count|safe|default:"[]" }}</div>
    <div id="weanlingsData" style="display: none;">{{ unique_weanling_ids|safe|default:"[]" }}</div>
    <div id="average_weights" style="display: none;">{{ average_weights |safe|default:"[]" }}</div>
    <div id="quantity_by_ration_data"style="display: none;">{{ result| safe }}</div>
    <div id="quantity_by_ration_data"style="display: none;">{{ stock_prescriptions| safe }}</div>
    <div id="feed_expenses_dates" style="display: none;">{{ feed_expenses_dates|safe }}</div>
    <div id="feed_expenses_costs" style="display: none;">{{ feed_expenses_costs|safe }}</div>
    <div id="vaccine_counts_dict"style="display: none;">{{ vaccine_counts_dict|safe|default:"[]" }}</div>
    <div id="unvaccinated_counts" style="display: none;">{{ unvaccinated_counts|safe }}</div>
    <div id="vaccine_needed" style="display: none;">{{ vaccine_needed|safe }}</div>
    <div class="row">
        <div class="col-4">
            <div class="graph-container" style="height: 88%; width: 100%; margin-top: 2%; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);">
                <div class="rounded-top" style="background-color: #ff7b7b;">
                    <img src="{% static 'img/pig_logo.png' %}" class="ms-2" style="width: 5%;">
                    <span class="mx-3 pt-2 fs-5 text-white fw-bold">
                        Vaccination Rate
                    </span>
                </div>
                <div class="d-flex flex-column align-items-center">
                    <canvas id="salesLineChart" width="500%" height="230%"></canvas>
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="graph-container" style="height: 88%; width: 100%; margin-top: 2%; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);">
                <div class="rounded-top" style="background-color: #ff7b7b;">
                    <img src="{% static 'img/pig_logo.png' %}" class="ms-2" style="width: 5%;">
                    <span class="mx-3 pt-2 fs-5 text-white fw-bold">
                        Vaccination Rate
                    </span>
                </div>
                <div class="d-flex flex-column align-items-center">
                    <canvas id="vaccinationProgress" width="700%" height="150%"  style="margin:2%;"></canvas>
                </div>
            </div>
        </div>
        <div class="col-4 mt-2">
            <div class="graph-container" style="height: 90%; width: 100%; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2); overflow: scroll;">
                <div class="rounded-top" style="background-color: #ff7b7b;">
                    <img src="{% static 'img/pig_logo.png' %}" class="ms-2" style="width: 5%;">
                    <span class="mx-3 pt-2 fs-5 text-white fw-bold">
                        FeedStock
                    </span>
                </div>
                <div class="d-flex flex-row">
                    <div>
                        <canvas id="pieChart" width="150%" height="150%"></canvas>
                    </div>
                    <div class="mt-3 pe-2">
                        <p>Prescription:</p>
                        <ul>
                            {% for prescription in stock_prescriptions %}
                            <li>{{ prescription }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-4">
            <div class="row-1">
                <div class="graph-container" style="height: 45%; width: 100%; margin-top:0.2%; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);">
                    <div class="rounded-top" style="background-color: #ff7b7b;">
                        <img src="{% static 'img/pig_logo.png' %}" class="ms-2" style="width: 5%;">
                        <span class="mx-3 pt-2 fs-5 text-white fw-bold">
                            Monthly Registration Count
                        </span>
                    </div>
                    <canvas id="pigBarChart" width="500%" height="170%"></canvas>
                </div>
            </div>
            <div class="row-1">
                <div class="graph-container" style="height: 46%; width: 100%; margin-top: 2%; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);">
                    <div class="rounded-top" style="background-color: #ff7b7b;">
                        <img src="{% static 'img/pig_logo.png' %}" class="ms-2" style="width: 5%;">
                        <span class="mx-3 pt-2 fs-5 text-white fw-bold" style="width: 120%;">
                            Vaccination Rate
                        </span>
                    </div>
                    <canvas id="weightBarChart" width="400%" height="150%"></canvas>
                </div>
            </div>
        </div>
        <div class="col-4" style="transform: translateY(-11%);">
            <div class="row-1">
                <div class="graph-container" style="height: 30%; width: 100%; margin-top: 10%; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);">
                    <!-- Include the feed prescription here -->
                    <div class="rounded-top" style="background-color: #ff7b7b;">
                        <span class="mx-3 pt-2 fs-5 text-white fw-bold">
                            Feed Prescription
                        </span>
                    </div>
                    <div class="px-3 py-3">
                        <p>Total Pig Count: {{ total_pigs_for_feeds}}</p>
                        <p>Total Feed Needed: {{ total_feed_needed_formatted }} kilos</p>
                    </div>
                </div>
            </div>
            <div class="row-1">
                <div class="graph-container" style="height: 53%; width: 100%; margin-top:10%; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);">
                    <div class="rounded-top" style="background-color: #ff7b7b;">
                        <img src="{% static 'img/mortality_icon.png' %}" class="ms-2" style="width: 3%;">
                        <span class="mx-3 pt-2 fs-5 text-white fw-bold">
                            Monthly Mortality
                        </span>
                    </div>
                    <canvas id="weanlingsProgressBar" width="400" height="100"></canvas>
                    <div class="px-3 py-3">
                        <!-- Display the monthly mortality analysis here -->
                        <p>Prescription: {{ weanlings_prescription }}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="graph-container" style="height: 93%; width: 100%; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2); overflow: scroll;">
                <div class="rounded-top" style="background-color: #ff7b7b;">
                    <img src="{% static 'img/mortality_icon.png' %}" class="ms-2" style="width: 3%;">
                    <span class="mx-3 fs-5 text-white fw-bold">
                        Monthly Mortality
                    </span>
                </div>
                <canvas id="mortalityAreaChart" width="500%" height="150%"></canvas>
                <div class="px-3 py-3">
                    <!-- Display the monthly mortality analysis here -->
                    <p>Average Monthly Mortality Count: {{ mortality_rate|floatformat:"2" }}%</p>
                    <p>This month ({{ current_year_month }}): {{ average_monthly_mortality_rate|floatformat:"2" }}%</p>
                    <p>Prescription: {{ prescription }}</p>
                    <p>Top Causes of Mortality:</p>
                    <ul>
                        {% for cause in top_mortality_causes %}
                            <li>{{ cause.cause }}: {{ cause.count }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div style="height: 20%; transform: translateY(-2%)">
        <canvas id="expensesBarChart" width="500" height="150"></canvas>
    </div>
<canvas id="vaccine_needed_bar_chart" width="400" height="200"></canvas>
<canvas id="vaccine_counts_chart" width="40%" height="10%"></canvas>
    {% endblock %}